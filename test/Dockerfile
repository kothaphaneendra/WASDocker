FROM websphere-traditional:profile
ENV FERRET_VERSION 1.2 
RUN wget http://search.maven.org/remotecontent?filepath=net/wasdev/wlp/sample/ferret/$FERRET_VERSION/ferret-$FERRET_VERSION.war -O /tmp/ferret.war
RUN /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin/wsadmin.sh -conntype NONE -lang jython -c "AdminApp.install('/tmp/ferret.war', '[ -nopreCompileJSPs -distributeApp -nouseMetaDataFromBinary -nodeployejb -appname ferret_war -createMBeansForResources -noreloadEnabled -nodeployws -validateinstall warn -noprocessEmbeddedConfig -filepermission .*\.dll=755#.*\.so=755#.*\.a=755#.*\.sl=755 -noallowDispatchRemoteInclude -noallowServiceRemoteInclude -asyncRequestDispatchType DISABLED -nouseAutoLink -noenableClientModule -clientMode isolated -novalidateSchema -contextroot ferret -MapModulesToServers [[ ferret ferret.war,WEB-INF/web.xml WebSphere:cell=DefaultCell01,node=DefaultNode01,server=server1 ]] -MapWebModToVH [[ ferret ferret.war,WEB-INF/web.xml default_host ]]]' );AdminConfig.save()"
